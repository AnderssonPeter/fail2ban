# Template for configuration

http:
  routers:
    my-router:
      middlewares:
        - fail2ban
      entrypoints:
        - http
      service: service-whoami
      rule: Path(`/whoami`)

  services:
    service-whoami:
      loadBalancer:
        servers:
          - url: http://localhost:5000
        passHostHeader: false
  middlewares:
    fail2ban:
      plugin:
        dev:
          Whitelist:
            Files:
              - "file1.txt"
              - "file2.txt"
            IP:
                - "::1"
                - "127.0.0.1"
          Blacklist:
            Files:
              - "file3.txt"
              - "file4.txt"
            IP:
                - "::1"
                - "127.0.0.1"
          Rules:
            ignorecommand: ""
            bantime: "300"
            findtime: "120"
            maxretry: 3
            backend: ""
            usedns: ""
            logencoding: "UTF-8"
            bantime: "20m"
            findtime: "20m"
            maxretry: 2
            enabled: true
            mode: ""
            filter: ""
            destemail: ""
            sender: ""
            mta: ""
            protocol: ""
            chain: ""
            port:
              - 0
              - 10000
            fail2banAgent: ""
            banaction: ""
            banactionAllports: ""
            actionAbuseipdb: ""
            action: ""
